{"ast":null,"code":"import { Struct } from '@polkadot/types-codec';\nimport { getUniqTypes, toCallsOnly } from './util/index.js';\nimport { toV10 } from './v9/toV10.js';\nimport { toV11 } from './v10/toV11.js';\nimport { toV12 } from './v11/toV12.js';\nimport { toV13 } from './v12/toV13.js';\nimport { toV14 } from './v13/toV14.js';\nimport { toV15 } from './v14/toV15.js';\nimport { toLatest } from './v15/toLatest.js';\nimport { MagicNumber } from './MagicNumber.js';\nimport { LATEST_VERSION, TO_CALLS_VERSION } from './versions.js';\n/**\n * @name MetadataVersioned\n * @description\n * The versioned runtime metadata as a decoded structure\n */\nexport class MetadataVersioned extends Struct {\n  __internal__converted = new Map();\n  constructor(registry, value) {\n    // const timeStart = performance.now()\n    super(registry, {\n      magicNumber: MagicNumber,\n      metadata: 'MetadataAll'\n    }, value);\n    // console.log('MetadataVersioned', `${(performance.now() - timeStart).toFixed(2)}ms`)\n  }\n  __internal__assertVersion = version => {\n    if (this.version > version) {\n      throw new Error(`Cannot convert metadata from version ${this.version} to ${version}`);\n    }\n    return this.version === version;\n  };\n  __internal__getVersion = (version, fromPrev) => {\n    if (version !== 'latest' && this.__internal__assertVersion(version)) {\n      const asCurr = `asV${version}`;\n      return this.__internal__metadata()[asCurr];\n    }\n    if (!this.__internal__converted.has(version)) {\n      const asPrev = version === 'latest' ? `asV${LATEST_VERSION}` : `asV${version - 1}`;\n      this.__internal__converted.set(version, fromPrev(this.registry, this[asPrev], this.version));\n    }\n    return this.__internal__converted.get(version);\n  };\n  /**\n   * @description the metadata wrapped\n   */\n  __internal__metadata = () => {\n    return this.getT('metadata');\n  };\n  /**\n   * @description Returns the wrapped metadata as a limited calls-only (latest) version\n   */\n  get asCallsOnly() {\n    return new MetadataVersioned(this.registry, {\n      magicNumber: this.magicNumber,\n      metadata: this.registry.createTypeUnsafe('MetadataAll', [toCallsOnly(this.registry, this.asLatest), TO_CALLS_VERSION])\n    });\n  }\n  /**\n   * @description Returns the wrapped metadata as a V9 object\n   */\n  get asV9() {\n    this.__internal__assertVersion(9);\n    return this.__internal__metadata().asV9;\n  }\n  /**\n   * @description Returns the wrapped values as a V10 object\n   */\n  get asV10() {\n    return this.__internal__getVersion(10, toV10);\n  }\n  /**\n   * @description Returns the wrapped values as a V11 object\n   */\n  get asV11() {\n    return this.__internal__getVersion(11, toV11);\n  }\n  /**\n   * @description Returns the wrapped values as a V12 object\n   */\n  get asV12() {\n    return this.__internal__getVersion(12, toV12);\n  }\n  /**\n   * @description Returns the wrapped values as a V13 object\n   */\n  get asV13() {\n    return this.__internal__getVersion(13, toV13);\n  }\n  /**\n   * @description Returns the wrapped values as a V14 object\n   */\n  get asV14() {\n    return this.__internal__getVersion(14, toV14);\n  }\n  /**\n   * @description Returns the wrapped values as a V14 object\n   */\n  get asV15() {\n    return this.__internal__getVersion(15, toV15);\n  }\n  /**\n   * @description Returns the wrapped values as a latest version object\n   */\n  get asLatest() {\n    return this.__internal__getVersion('latest', toLatest);\n  }\n  /**\n   * @description The magicNumber for the Metadata (known constant)\n   */\n  get magicNumber() {\n    return this.getT('magicNumber');\n  }\n  /**\n   * @description the metadata version this structure represents\n   */\n  get version() {\n    return this.__internal__metadata().index;\n  }\n  getUniqTypes(throwError) {\n    return getUniqTypes(this.registry, this.asLatest, throwError);\n  }\n  /**\n   * @description Converts the Object to JSON, typically used for RPC transfers\n   */\n  toJSON() {\n    // HACK(y): ensure that we apply the aliases if we have not done so already, this is\n    // needed to ensure we have the correct overrides (which is only applied in toLatest)\n    // eslint-disable-next-line no-unused-expressions\n    this.asLatest;\n    return super.toJSON();\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}