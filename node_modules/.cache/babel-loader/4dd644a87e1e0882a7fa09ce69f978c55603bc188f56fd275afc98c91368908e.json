{"ast":null,"code":"import { lazyDeriveSection } from './util/index.js';\nimport { derive } from './derive.js';\nexport * from './derive.js';\nexport * from './type/index.js';\nexport { lazyDeriveSection };\nconst checks = {\n  allianceMotion: {\n    instances: ['allianceMotion'],\n    methods: []\n  },\n  bagsList: {\n    instances: ['voterBagsList', 'voterList', 'bagsList'],\n    methods: [],\n    withDetect: true\n  },\n  contracts: {\n    instances: ['contracts'],\n    methods: []\n  },\n  council: {\n    instances: ['council'],\n    methods: [],\n    withDetect: true\n  },\n  crowdloan: {\n    instances: ['crowdloan'],\n    methods: []\n  },\n  democracy: {\n    instances: ['democracy'],\n    methods: []\n  },\n  elections: {\n    instances: ['phragmenElection', 'electionsPhragmen', 'elections', 'council'],\n    methods: [],\n    withDetect: true\n  },\n  imOnline: {\n    instances: ['imOnline'],\n    methods: []\n  },\n  membership: {\n    instances: ['membership'],\n    methods: []\n  },\n  parachains: {\n    instances: ['parachains', 'registrar'],\n    methods: []\n  },\n  session: {\n    instances: ['session'],\n    methods: []\n  },\n  society: {\n    instances: ['society'],\n    methods: []\n  },\n  staking: {\n    instances: ['staking'],\n    methods: ['erasRewardPoints']\n  },\n  technicalCommittee: {\n    instances: ['technicalCommittee'],\n    methods: [],\n    withDetect: true\n  },\n  treasury: {\n    instances: ['treasury'],\n    methods: []\n  }\n};\nfunction getModuleInstances(api, specName, moduleName) {\n  return api.registry.getModuleInstances(specName, moduleName) || [];\n}\n/**\n * Returns an object that will inject `api` into all the functions inside\n * `allSections`, and keep the object architecture of `allSections`.\n */\n/** @internal */\nfunction injectFunctions(instanceId, api, derives) {\n  const result = {};\n  const names = Object.keys(derives);\n  const keys = Object.keys(api.query);\n  const specName = api.runtimeVersion.specName;\n  const filterKeys = q => keys.includes(q);\n  const filterInstances = q => getModuleInstances(api, specName, q).some(filterKeys);\n  const filterMethods = all => m => all.some(q => keys.includes(q) && api.query[q][m]);\n  const getKeys = s => Object.keys(derives[s]);\n  const creator = (s, m) => derives[s][m](instanceId, api);\n  const isIncluded = c => !checks[c] || checks[c].instances.some(filterKeys) && (!checks[c].methods.length || checks[c].methods.every(filterMethods(checks[c].instances))) || checks[c].withDetect && checks[c].instances.some(filterInstances);\n  for (let i = 0, count = names.length; i < count; i++) {\n    const name = names[i];\n    isIncluded(name) && lazyDeriveSection(result, name, getKeys, creator);\n  }\n  return result;\n}\n/** @internal */\nexport function getAvailableDerives(instanceId, api, custom = {}) {\n  return {\n    ...injectFunctions(instanceId, api, derive),\n    ...injectFunctions(instanceId, api, custom)\n  };\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}