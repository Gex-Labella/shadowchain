{"ast":null,"code":"import { BehaviorSubject, map, of, switchMap, tap, toArray } from 'rxjs';\nimport { nextTick } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nimport { getQueryInterface } from './util.js';\nfunction traverseLinks(api, head) {\n  const subject = new BehaviorSubject(head);\n  const query = getQueryInterface(api);\n  return subject.pipe(switchMap(account => query.listNodes(account)), tap(node => {\n    nextTick(() => {\n      node.isSome && node.value.next.isSome ? subject.next(node.unwrap().next.unwrap()) : subject.complete();\n    });\n  }), toArray(),\n  // toArray since we want to startSubject to be completed\n  map(all => all.map(o => o.unwrap())));\n}\nexport function listNodes(instanceId, api) {\n  return memo(instanceId, bag => bag && bag.head.isSome ? traverseLinks(api, bag.head.unwrap()) : of([]));\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}