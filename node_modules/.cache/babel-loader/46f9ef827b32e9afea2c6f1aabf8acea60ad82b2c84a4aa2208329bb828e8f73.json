{"ast":null,"code":"import { compactAddLength, compactStripLength, compactToU8a, isHex, isU8a, u8aToU8a } from '@polkadot/util';\nimport { Raw } from '../native/Raw.js';\nimport { typeToConstructor } from '../utils/index.js';\nimport { Bytes } from './Bytes.js';\nfunction decodeRaw(registry, typeName, value) {\n  const Type = typeToConstructor(registry, typeName);\n  if (isU8a(value) || isHex(value)) {\n    try {\n      const [, u8a] = isHex(value) ? [0, u8aToU8a(value)] : value instanceof Raw ? [0, value.subarray()] : compactStripLength(value);\n      return [Type, new Type(registry, u8a), value];\n    } catch {\n      return [Type, null, value];\n    }\n  }\n  const instance = new Type(registry, value);\n  return [Type, instance, compactAddLength(instance.toU8a())];\n}\nexport class WrapperKeepOpaque extends Bytes {\n  __internal__Type;\n  __internal__decoded;\n  __internal__opaqueName;\n  constructor(registry, typeName, value, {\n    opaqueName = 'WrapperKeepOpaque'\n  } = {}) {\n    const [Type, decoded, u8a] = decodeRaw(registry, typeName, value);\n    super(registry, u8a);\n    this.__internal__Type = Type;\n    this.__internal__decoded = decoded;\n    this.__internal__opaqueName = opaqueName;\n  }\n  static with(Type) {\n    return class extends WrapperKeepOpaque {\n      constructor(registry, value) {\n        super(registry, Type, value);\n      }\n    };\n  }\n  /**\n   * @description Checks if the wrapper is decodable\n   */\n  get isDecoded() {\n    return !!this.__internal__decoded;\n  }\n  /**\n   * @description Returns a breakdown of the hex encoding for this Codec\n   */\n  inspect() {\n    return this.__internal__decoded ? {\n      inner: [this.__internal__decoded.inspect()],\n      outer: [compactToU8a(this.length)]\n    } : {\n      outer: [compactToU8a(this.length), this.toU8a(true)]\n    };\n  }\n  /**\n   * @description Converts the Object to to a human-friendly JSON, with additional fields, expansion and formatting of information\n   */\n  toHuman(isExtended, disableAscii) {\n    return this.__internal__decoded ? this.__internal__decoded.toHuman(isExtended, disableAscii) : super.toHuman(isExtended, disableAscii);\n  }\n  /**\n   * @description Converts the value in a best-fit primitive form\n   */\n  toPrimitive(disableAscii) {\n    return this.__internal__decoded ? this.__internal__decoded.toPrimitive(disableAscii) : super.toPrimitive(disableAscii);\n  }\n  /**\n   * @description Returns the base runtime type name for this instance\n   */\n  toRawType() {\n    return `${this.__internal__opaqueName}<${this.registry.getClassName(this.__internal__Type) || (this.__internal__decoded ? this.__internal__decoded.toRawType() : new this.__internal__Type(this.registry).toRawType())}>`;\n  }\n  /**\n   * @description Converts the Object to to a string (either decoded or bytes)\n   */\n  toString() {\n    return this.__internal__decoded ? this.__internal__decoded.toString() : super.toString();\n  }\n  /**\n   * @description Returns the decoded that the WrapperKeepOpaque represents (if available), throws if non-decodable\n   */\n  unwrap() {\n    if (!this.__internal__decoded) {\n      throw new Error(`${this.__internal__opaqueName}: unwrapping an undecodable value`);\n    }\n    return this.__internal__decoded;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}