{"ast":null,"code":"import { BN } from './bn.js';\nimport { BN_MAX_INTEGER, BN_ONE, BN_SQRT_MAX_INTEGER } from './consts.js';\nimport { bnToBn } from './toBn.js';\n/**\n * @name bnSqrt\n * @summary Calculates the integer square root of a BN\n * @example\n * <BR>\n *\n * ```javascript\n * import BN from 'bn.js';\n * import { bnSqrt } from '@polkadot/util';\n *\n * bnSqrt(new BN(16)).toString(); // => '4'\n * ```\n */\nexport function bnSqrt(value) {\n  const n = bnToBn(value);\n  if (n.isNeg()) {\n    throw new Error('square root of negative numbers is not supported');\n  }\n  // https://stackoverflow.com/questions/53683995/javascript-big-integer-square-root/\n  // shortcut <= 2^53 - 1 to use the JS utils\n  if (n.lte(BN_MAX_INTEGER)) {\n    // ~~ More performant version of Math.floor\n    return new BN(~~Math.sqrt(n.toNumber()));\n  }\n  // Use sqrt(MAX_SAFE_INTEGER) as starting point. since we already know the\n  // output will be larger than this, we expect this to be a safe start\n  let x0 = BN_SQRT_MAX_INTEGER.clone();\n  while (true) {\n    const x1 = n.div(x0).iadd(x0).ishrn(1);\n    if (x0.eq(x1) || x0.eq(x1.sub(BN_ONE))) {\n      return x0;\n    }\n    x0 = x1;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}