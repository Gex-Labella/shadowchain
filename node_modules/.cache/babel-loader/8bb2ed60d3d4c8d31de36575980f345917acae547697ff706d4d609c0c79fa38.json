{"ast":null,"code":"const recordIdentity = record => record;\nfunction filterAndApply(events, section, methods, onFound) {\n  return events.filter(({\n    event\n  }) => section === event.section && methods.includes(event.method)).map(record => onFound(record));\n}\nfunction getDispatchError({\n  event: {\n    data: [dispatchError]\n  }\n}) {\n  return dispatchError;\n}\nfunction getDispatchInfo({\n  event: {\n    data,\n    method\n  }\n}) {\n  return method === 'ExtrinsicSuccess' ? data[0] : data[1];\n}\nfunction extractError(events = []) {\n  return filterAndApply(events, 'system', ['ExtrinsicFailed'], getDispatchError)[0];\n}\nfunction extractInfo(events = []) {\n  return filterAndApply(events, 'system', ['ExtrinsicFailed', 'ExtrinsicSuccess'], getDispatchInfo)[0];\n}\nexport class SubmittableResult {\n  dispatchError;\n  dispatchInfo;\n  internalError;\n  events;\n  status;\n  txHash;\n  txIndex;\n  blockNumber;\n  constructor({\n    blockNumber,\n    dispatchError,\n    dispatchInfo,\n    events,\n    internalError,\n    status,\n    txHash,\n    txIndex\n  }) {\n    this.dispatchError = dispatchError || extractError(events);\n    this.dispatchInfo = dispatchInfo || extractInfo(events);\n    this.events = events || [];\n    this.internalError = internalError;\n    this.status = status;\n    this.txHash = txHash;\n    this.txIndex = txIndex;\n    this.blockNumber = blockNumber;\n  }\n  get isCompleted() {\n    return this.isError || this.status.isInBlock || this.status.isFinalized;\n  }\n  get isError() {\n    return this.status.isDropped || this.status.isFinalityTimeout || this.status.isInvalid || this.status.isUsurped;\n  }\n  get isFinalized() {\n    return this.status.isFinalized;\n  }\n  get isInBlock() {\n    return this.status.isInBlock;\n  }\n  get isWarning() {\n    return this.status.isRetracted;\n  }\n  /**\n   * @description Filters EventRecords for the specified method & section (there could be multiple)\n   */\n  filterRecords(section, method) {\n    return filterAndApply(this.events, section, Array.isArray(method) ? method : [method], recordIdentity);\n  }\n  /**\n   * @description Finds an EventRecord for the specified method & section\n   */\n  findRecord(section, method) {\n    return this.filterRecords(section, method)[0];\n  }\n  /**\n   * @description Creates a human representation of the output\n   */\n  toHuman(isExtended) {\n    return {\n      dispatchError: this.dispatchError?.toHuman(),\n      dispatchInfo: this.dispatchInfo?.toHuman(),\n      events: this.events.map(e => e.toHuman(isExtended)),\n      internalError: this.internalError?.message.toString(),\n      status: this.status.toHuman(isExtended)\n    };\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}