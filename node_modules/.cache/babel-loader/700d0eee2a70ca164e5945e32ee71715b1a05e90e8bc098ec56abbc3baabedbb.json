{"ast":null,"code":"import { map, of } from 'rxjs';\nimport { isFunction } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nfunction parseFlags(address, [electionsMembers, councilMembers, technicalCommitteeMembers, societyMembers, sudoKey]) {\n  const addrStr = address?.toString();\n  const isIncluded = id => id.toString() === addrStr;\n  return {\n    isCouncil: (electionsMembers?.map(r => Array.isArray(r) ? r[0] : r.who) || councilMembers || []).some(isIncluded),\n    isSociety: (societyMembers || []).some(isIncluded),\n    isSudo: sudoKey?.toString() === addrStr,\n    isTechCommittee: (technicalCommitteeMembers || []).some(isIncluded)\n  };\n}\nexport function _flags(instanceId, api) {\n  return memo(instanceId, () => {\n    const results = [undefined, [], [], [], undefined];\n    const calls = [(api.query.elections || api.query['phragmenElection'] || api.query['electionsPhragmen'])?.members, api.query.council?.members, api.query.technicalCommittee?.members, api.query.society?.members, api.query.sudo?.key];\n    const filtered = calls.filter(c => c);\n    if (!filtered.length) {\n      return of(results);\n    }\n    return api.queryMulti(filtered).pipe(map(values => {\n      let resultIndex = -1;\n      for (let i = 0, count = calls.length; i < count; i++) {\n        if (isFunction(calls[i])) {\n          results[i] = values[++resultIndex];\n        }\n      }\n      return results;\n    }));\n  });\n}\n/**\n * @name info\n * @description Returns account membership flags\n */\nexport function flags(instanceId, api) {\n  return memo(instanceId, address => api.derive.accounts._flags().pipe(map(r => parseFlags(address, r))));\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}