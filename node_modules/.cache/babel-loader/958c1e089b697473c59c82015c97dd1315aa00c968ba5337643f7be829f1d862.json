{"ast":null,"code":"import { isString, isU8a, u8aToU8a } from '@polkadot/util';\nimport { MetadataVersioned } from './MetadataVersioned.js';\nconst EMPTY_METADATA = new Uint8Array([0x6d, 0x65, 0x74, 0x61, 9]);\nconst VERSION_IDX = EMPTY_METADATA.length - 1;\n/** @internal */\nfunction decodeU8a(registry, u8a) {\n  if (u8a.length === 0) {\n    return EMPTY_METADATA;\n  } else if (u8a[VERSION_IDX] === 9) {\n    // This is an f-ing hack as a follow-up to another ugly hack\n    // https://github.com/polkadot-js/api/commit/a9211690be6b68ad6c6dad7852f1665cadcfa5b2\n    // when we fail on V9, try to re-parse it as v10...\n    try {\n      return new MetadataVersioned(registry, u8a);\n    } catch {\n      u8a[VERSION_IDX] = 10;\n    }\n  }\n  return u8a;\n}\n/**\n * @name Metadata\n * @description\n * The versioned runtime metadata as a decoded structure\n */\nexport class Metadata extends MetadataVersioned {\n  constructor(registry, value) {\n    // const timeStart = performance.now()\n    super(registry, isU8a(value) || isString(value) ? decodeU8a(registry, u8aToU8a(value)) : value);\n    // console.log('Metadata', `${(performance.now() - timeStart).toFixed(2)}ms`)\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}