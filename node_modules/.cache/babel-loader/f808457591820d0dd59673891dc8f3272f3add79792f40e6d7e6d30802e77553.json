{"ast":null,"code":"import { combineLatest, map, of } from 'rxjs';\nimport { BN_ONE, BN_ZERO } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function erasHistoric(instanceId, api) {\n  return memo(instanceId, withActive => combineLatest([api.query.staking.activeEra(), api.consts.staking.historyDepth ? of(api.consts.staking.historyDepth) : api.query.staking['historyDepth']()]).pipe(map(([activeEraOpt, historyDepth]) => {\n    const result = [];\n    const max = historyDepth.toNumber();\n    const activeEra = activeEraOpt.unwrapOrDefault().index;\n    let lastEra = activeEra;\n    while (lastEra.gte(BN_ZERO) && result.length < max) {\n      if (lastEra !== activeEra || withActive === true) {\n        result.push(api.registry.createType('EraIndex', lastEra));\n      }\n      lastEra = lastEra.sub(BN_ONE);\n    }\n    // go from oldest to newest\n    return result.reverse();\n  })));\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}