{"ast":null,"code":"import { BigInt } from '@polkadot/x-bigint';\nimport { _0n, _1n, _2pow53n, _sqrt2pow53n } from './consts.js';\nimport { nToBigInt } from './toBigInt.js';\n/**\n * @name nSqrt\n * @summary Calculates the integer square root of a bigint\n */\nexport function nSqrt(value) {\n  const n = nToBigInt(value);\n  if (n < _0n) {\n    throw new Error('square root of negative numbers is not supported');\n  }\n  // https://stackoverflow.com/questions/53683995/javascript-big-integer-square-root/\n  // shortcut <= 2^53 - 1 to use the JS utils\n  if (n <= _2pow53n) {\n    // ~~ is more performant that Math.floor\n    return BigInt(~~Math.sqrt(Number(n)));\n  }\n  // Use sqrt(MAX_SAFE_INTEGER) as starting point. since we already know the\n  // output will be larger than this, we expect this to be a safe start\n  let x0 = _sqrt2pow53n;\n  while (true) {\n    const x1 = n / x0 + x0 >> _1n;\n    if (x0 === x1 || x0 === x1 - _1n) {\n      return x0;\n    }\n    x0 = x1;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}