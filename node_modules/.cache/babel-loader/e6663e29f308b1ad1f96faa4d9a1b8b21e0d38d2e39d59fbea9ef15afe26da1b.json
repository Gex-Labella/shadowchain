{"ast":null,"code":"import { map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { getImageHashBounded } from './util.js';\nfunction withImage(api, nextOpt) {\n  if (nextOpt.isNone) {\n    return of(null);\n  }\n  const [hash, threshold] = nextOpt.unwrap();\n  return api.derive.democracy.preimage(hash).pipe(map(image => ({\n    image,\n    imageHash: getImageHashBounded(hash),\n    threshold\n  })));\n}\nexport function nextExternal(instanceId, api) {\n  return memo(instanceId, () => api.query.democracy?.nextExternal ? api.query.democracy.nextExternal().pipe(switchMap(nextOpt => withImage(api, nextOpt))) : of(null));\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}